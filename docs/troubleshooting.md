# üîß –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

## –û–±—â–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

### –°–∏—Å—Ç–µ–º–∞ –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

**–°–∏–º–ø—Ç–æ–º—ã**: –°–∫—Ä–∏–ø—Ç—ã –Ω–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –∏–ª–∏ –≤—ã–¥–∞—é—Ç –æ—à–∏–±–∫–∏

**–†–µ—à–µ–Ω–∏–µ**:
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
ls -la *.sh
chmod +x *.sh

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
which sox
which arecord
which aplay

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏—Ö –ø–∞–∫–µ—Ç–æ–≤
sudo apt install -y sox alsa-utils pulseaudio bc
```

### –û—à–∏–±–∫–∞ "Permission denied"

**–°–∏–º–ø—Ç–æ–º—ã**: `zsh: permission denied: ./script.sh`

**–†–µ—à–µ–Ω–∏–µ**:
```bash
chmod +x script.sh
```

### –û—à–∏–±–∫–∞ "Command not found"

**–°–∏–º–ø—Ç–æ–º—ã**: `command not found: sox`

**–†–µ—à–µ–Ω–∏–µ**:
```bash
sudo apt update
sudo apt install -y sox
```

## –ü—Ä–æ–±–ª–µ–º—ã —Å –∞—É–¥–∏–æ

### –ú–∏–∫—Ä–æ—Ñ–æ–Ω –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–°–∏–º–ø—Ç–æ–º—ã**: –ó–∞–ø–∏—Å—å –ø—É—Å—Ç–∞—è –∏–ª–∏ —Å–ª–∏—à–∫–æ–º —Ç–∏—Ö–∞—è

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞**:
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤
arecord --list-devices

# –¢–µ—Å—Ç –∑–∞–ø–∏—Å–∏
arecord -d 3 test.wav
paplay test.wav

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Ä–æ–≤–Ω—è –∑–≤—É–∫–∞
sox test.wav -n stat
```

**–†–µ—à–µ–Ω–∏—è**:

1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞**:
```bash
# –¢–µ—Å—Ç —Ä–∞–∑–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
arecord -D hw:0,0 -d 3 test1.wav
arecord -D hw:1,0 -d 3 test2.wav
arecord -D default -d 3 test3.wav
```

2. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**:
```bash
# –£–≤–µ–ª–∏—á–µ–Ω–∏–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
amixer sset Capture 50%

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫
amixer sget Capture
```

3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞**:
```bash
# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –≥—Ä—É–ø–ø—É audio
sudo usermod -a -G audio $USER

# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –∏–ª–∏ –ø–µ—Ä–µ–ª–æ–≥–∏–Ω
```

### –î–∏–Ω–∞–º–∏–∫–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç

**–°–∏–º–ø—Ç–æ–º—ã**: –ù–µ—Ç –∑–≤—É–∫–∞ –ø—Ä–∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–∏

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞**:
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
aplay --list-devices

# –¢–µ—Å—Ç –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
paplay /usr/share/sounds/alsa/Front_Left.wav

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥—Ä–æ–º–∫–æ—Å—Ç–∏
amixer sget Master
```

**–†–µ—à–µ–Ω–∏—è**:

1. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≥—Ä–æ–º–∫–æ—Å—Ç–∏**:
```bash
amixer sset Master 80%
amixer sset PCM 80%
```

2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ PulseAudio**:
```bash
pulseaudio --start
pactl list sinks
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π

**–°–∏–º–ø—Ç–æ–º—ã**: –ó–∞–ø–∏—Å—å –∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –Ω–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞**:
```bash
# –¢–µ—Å—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
./sync_voice_test.sh

# –ê–Ω–∞–ª–∏–∑ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –º–µ—Ç–æ–∫
sox sync_recorded.wav -n stat
```

**–†–µ—à–µ–Ω–∏—è**:

1. **–£–≤–µ–ª–∏—á–µ–Ω–∏–µ –∑–∞–¥–µ—Ä–∂–∫–∏**:
```bash
# –ò–∑–º–µ–Ω–∏—Ç–µ sleep –≤ —Å–∫—Ä–∏–ø—Ç–∞—Ö
sleep 0.5  # –≤–º–µ—Å—Ç–æ sleep 0.1
```

2. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –±—É—Ñ–µ—Ä–æ–≤**:
```bash
# –£–≤–µ–ª–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –±—É—Ñ–µ—Ä–∞
sox -d -r 16000 -c 1 -b 16 --buffer 8192 output.wav
```

## –ü—Ä–æ–±–ª–µ–º—ã —Å Whisper

### –ú–æ–¥–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω–∞

**–°–∏–º–ø—Ç–æ–º—ã**: `Error: failed to load model`

**–†–µ—à–µ–Ω–∏–µ**:
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –º–æ–¥–µ–ª–∏
ls -la whisper.cpp/models/

# –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏
wget -O whisper.cpp/models/ggml-base.bin \
  https://huggingface.co/ggerganov/whisper.cpp/resolve/main/ggml-base.bin
```

### –û—à–∏–±–∫–∞ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è

**–°–∏–º–ø—Ç–æ–º—ã**: –ü—É—Å—Ç–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏–ª–∏ –æ—à–∏–±–∫–∏

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞**:
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞—É–¥–∏–æ—Ñ–∞–π–ª–∞
sox input.wav -n stat

# –¢–µ—Å—Ç Whisper –Ω–∞–ø—Ä—è–º—É—é
./whisper.cpp/main -m whisper.cpp/models/ggml-base.bin -f input.wav -l ru
```

**–†–µ—à–µ–Ω–∏—è**:

1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞ –∞—É–¥–∏–æ**:
```bash
# –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º—É —Ñ–æ—Ä–º–∞—Ç—É
sox input.wav -r 16000 -c 1 -b 16 output.wav
```

2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —è–∑—ã–∫–∞**:
```bash
# –£–∫–∞–∑–∞–Ω–∏–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —è–∑—ã–∫–∞
./whisper.cpp/main -m whisper.cpp/models/ggml-base.bin -f input.wav -l ru
```

### –ú–µ–¥–ª–µ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞

**–°–∏–º–ø—Ç–æ–º—ã**: –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –∑–∞–Ω–∏–º–∞–µ—Ç –º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏

**–†–µ—à–µ–Ω–∏—è**:

1. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±–æ–ª–µ–µ –ª–µ–≥–∫–æ–π –º–æ–¥–µ–ª–∏**:
```bash
# –°–∫–∞—á–∏–≤–∞–Ω–∏–µ tiny –º–æ–¥–µ–ª–∏
wget -O whisper.cpp/models/ggml-tiny.bin \
  https://huggingface.co/ggerganov/whisper.cpp/resolve/main/ggml-tiny.bin
```

2. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤**:
```bash
# –£–º–µ–Ω—å—à–µ–Ω–∏–µ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∑–∞–ø–∏—Å–∏
# –ò–∑–º–µ–Ω–∏—Ç–µ trim –≤ —Å–∫—Ä–∏–ø—Ç–∞—Ö
```

## –ü—Ä–æ–±–ª–µ–º—ã —Å Piper

### –ú–æ–¥–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω–∞

**–°–∏–º–ø—Ç–æ–º—ã**: `Error: failed to load model`

**–†–µ—à–µ–Ω–∏–µ**:
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –º–æ–¥–µ–ª–∏
ls -la piper/

# –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏ (–∑–∞–º–µ–Ω–∏—Ç–µ URL)
# wget -O piper/ru_RU-irina-medium.onnx [URL]
```

### –û—à–∏–±–∫–∞ —Å–∏–Ω—Ç–µ–∑–∞

**–°–∏–º–ø—Ç–æ–º—ã**: –°–∏–Ω—Ç–µ–∑ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–ª–∏ –≤—ã–¥–∞–µ—Ç –æ—à–∏–±–∫–∏

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞**:
```bash
# –¢–µ—Å—Ç Piper –Ω–∞–ø—Ä—è–º—É—é
echo "–ü—Ä–∏–≤–µ—Ç" | ./piper/piper --model piper/ru_RU-irina-medium.onnx --output_file test.wav

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–∞
sox test.wav -n stat
```

**–†–µ—à–µ–Ω–∏—è**:

1. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ espeak-ng**:
```bash
# –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–∏–Ω—Ç–µ–∑
./piper/espeak-ng -v ru -w output.wav "–ü—Ä–∏–≤–µ—Ç"
```

2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞**:
```bash
chmod +x piper/piper
```

## –ü—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é

### –í—ã—Å–æ–∫–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ CPU

**–°–∏–º–ø—Ç–æ–º—ã**: –°–∏—Å—Ç–µ–º–∞ —Ç–æ—Ä–º–æ–∑–∏—Ç –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ

**–†–µ—à–µ–Ω–∏—è**:

1. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±–æ–ª–µ–µ –ª–µ–≥–∫–∏—Ö –º–æ–¥–µ–ª–µ–π**:
```bash
# Whisper tiny –≤–º–µ—Å—Ç–æ base
# Piper fast –≤–º–µ—Å—Ç–æ medium
```

2. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∑–∞–ø–∏—Å–∏**:
```bash
# –£–º–µ–Ω—å—à–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã –¥–∏—Å–∫—Ä–µ—Ç–∏–∑–∞—Ü–∏–∏
sox -d -r 8000 -c 1 -b 16 output.wav
```

### –ù–µ—Ö–≤–∞—Ç–∫–∞ –ø–∞–º—è—Ç–∏

**–°–∏–º–ø—Ç–æ–º—ã**: –û—à–∏–±–∫–∏ "out of memory"

**–†–µ—à–µ–Ω–∏—è**:

1. **–ó–∞–∫—Ä—ã—Ç–∏–µ –¥—Ä—É–≥–∏—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π**
2. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ swap**:
```bash
sudo swapon --show
sudo fallocate -l 2G /swapfile
sudo chmod 600 /swapfile
sudo mkswap /swapfile
sudo swapon /swapfile
```

## –õ–æ–≥–∏ –∏ –æ—Ç–ª–∞–¥–∫–∞

### –í–∫–ª—é—á–µ–Ω–∏–µ –ø–æ–¥—Ä–æ–±–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞

```bash
# –î–æ–±–∞–≤—å—Ç–µ -v –≤ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞
sox -v -d output.wav
./whisper.cpp/main -v -m model.bin -f input.wav
```

### –°–æ–∑–¥–∞–Ω–∏–µ –ª–æ–≥–æ–≤

```bash
# –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—ã–≤–æ–¥–∞ –≤ —Ñ–∞–π–ª
./script.sh > log.txt 2>&1

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
./script.sh | tee log.txt
```

### –ê–Ω–∞–ª–∏–∑ –æ—à–∏–±–æ–∫

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –æ—à–∏–±–æ–∫
tail -f /var/log/syslog | grep -i audio

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
ps aux | grep -E "(sox|whisper|piper)"
```

## –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–º–æ—â–∏

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –Ω–µ —Ä–µ—à–∞–µ—Ç—Å—è:

1. **–°–æ–∑–¥–∞–π—Ç–µ Issue –≤ GitHub** —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º –æ–ø–∏—Å–∞–Ω–∏–µ–º
2. **–ü—Ä–∏–ª–æ–∂–∏—Ç–µ –ª–æ–≥–∏** –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
3. **–£–∫–∞–∂–∏—Ç–µ –≤–µ—Ä—Å–∏–∏** –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–≥–æ –ü–û
4. **–û–ø–∏—à–∏—Ç–µ —à–∞–≥–∏** –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã 