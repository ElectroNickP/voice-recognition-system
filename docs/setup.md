# üõ†Ô∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

## –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **–û–°**: Linux (Ubuntu 20.04+, Debian 11+, –∏–ª–∏ –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–µ)
- **RAM**: –ú–∏–Ω–∏–º—É–º 2 GB (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 4 GB)
- **–î–∏—Å–∫–æ–≤–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ**: 2 GB –¥–ª—è –º–æ–¥–µ–ª–µ–π –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- **–ê—É–¥–∏–æ**: –ú–∏–∫—Ä–æ—Ñ–æ–Ω –∏ –¥–∏–Ω–∞–º–∏–∫–∏/–Ω–∞—É—à–Ω–∏–∫–∏

## –ü–æ—à–∞–≥–æ–≤–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞–∫–µ—Ç–æ–≤
sudo apt update

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
sudo apt install -y sox alsa-utils pulseaudio bc wget make git

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
sox --version
arecord --version
aplay --version
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞—É–¥–∏–æ—Å–∏—Å—Ç–µ–º—ã

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞—É–¥–∏–æ—É—Å—Ç—Ä–æ–π—Å—Ç–≤
arecord --list-devices
aplay --list-devices

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≥—Ä–æ–º–∫–æ—Å—Ç–∏
amixer sset Capture 20%
amixer sset Master 80%

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞
arecord -d 3 test_mic.wav
paplay test_mic.wav
rm test_mic.wav
```

### 3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Whisper.cpp

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —Å–¥–µ–ª–∞–Ω–æ)
git clone https://github.com/ggerganov/whisper.cpp.git

# –°–±–æ—Ä–∫–∞
cd whisper.cpp
make

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–±–æ—Ä–∫–∏
./main --help
cd ..
```

### 4. –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–µ–π

#### Whisper –º–æ–¥–µ–ª–∏

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–ª—è –º–æ–¥–µ–ª–µ–π
mkdir -p whisper.cpp/models

# –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –±–∞–∑–æ–≤–æ–π –º–æ–¥–µ–ª–∏ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –Ω–∞—á–∞–ª–∞)
wget -O whisper.cpp/models/ggml-base.bin \
  https://huggingface.co/ggerganov/whisper.cpp/resolve/main/ggml-base.bin

# –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –º–æ–¥–µ–ª–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
# wget -O whisper.cpp/models/ggml-medium.bin \
#   https://huggingface.co/ggerganov/whisper.cpp/resolve/main/ggml-medium.bin
# wget -O whisper.cpp/models/ggml-large.bin \
#   https://huggingface.co/ggerganov/whisper.cpp/resolve/main/ggml-large.bin
```

#### Piper –º–æ–¥–µ–ª–∏

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–ª—è Piper
mkdir -p piper

# –°–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ä—É—Å—Å–∫–æ–π –º–æ–¥–µ–ª–∏ (–∑–∞–º–µ–Ω–∏—Ç–µ URL –Ω–∞ –∞–∫—Ç—É–∞–ª—å–Ω—ã–π)
# wget -O piper/ru_RU-irina-medium.onnx [URL_TO_MODEL]
# wget -O piper/ru_RU-irina-medium.onnx.json [URL_TO_CONFIG]

# –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ espeak-ng –∫–∞–∫ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—É
# espeak-ng —É–∂–µ –≤–∫–ª—é—á–µ–Ω –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
```

### 5. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞

```bash
# –ü—Ä–∞–≤–∞ –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–ª—è —Å–∫—Ä–∏–ø—Ç–æ–≤
chmod +x *.sh

# –ü—Ä–∞–≤–∞ –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–ª—è –±–∏–Ω–∞—Ä–Ω–∏–∫–æ–≤
chmod +x piper/piper
chmod +x piper/espeak-ng
chmod +x whisper.cpp/main
```

### 6. –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

```bash
# –¢–µ—Å—Ç —Å–∏–Ω—Ç–µ–∑–∞ —Ä–µ—á–∏
./speak.sh "–ü—Ä–∏–≤–µ—Ç, —ç—Ç–æ —Ç–µ—Å—Ç —Å–∏–Ω—Ç–µ–∑–∞ —Ä–µ—á–∏"

# –¢–µ—Å—Ç —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è
./listen.sh

# –ü–æ–ª–Ω—ã–π —Ç–µ—Å—Ç —Å–∏—Å—Ç–µ–º—ã
./demo_recognition.sh
```

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞—É–¥–∏–æ—É—Å—Ç—Ä–æ–π—Å—Ç–≤

–ï—Å–ª–∏ —É –≤–∞—Å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∞—É–¥–∏–æ—É—Å—Ç—Ä–æ–π—Å—Ç–≤, –≤—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ:

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä —É—Å—Ç—Ä–æ–π—Å—Ç–≤
arecord --list-devices | grep -A 1 "card"
aplay --list-devices | grep -A 1 "card"

# –ò–∑–º–µ–Ω–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ /etc/asound.conf –∏–ª–∏ ~/.asoundrc
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∑–∞–ø–∏—Å–∏

–û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –≤ —Å–∫—Ä–∏–ø—Ç–∞—Ö:

- **–ß–∞—Å—Ç–æ—Ç–∞ –¥–∏—Å–∫—Ä–µ—Ç–∏–∑–∞—Ü–∏–∏**: 16000 Hz (–æ–ø—Ç–∏–º–∞–ª—å–Ω–æ –¥–ª—è Whisper)
- **–ö–∞–Ω–∞–ª—ã**: 1 (–º–æ–Ω–æ)
- **–ë–∏—Ç–Ω–æ—Å—Ç—å**: 16 bit
- **–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞–ø–∏—Å–∏**: 5 —Å–µ–∫—É–Ω–¥ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞

```bash
# –£–≤–µ–ª–∏—á–µ–Ω–∏–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
amixer sset Capture 50%

# –£–º–µ–Ω—å—à–µ–Ω–∏–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
amixer sset Capture 10%

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–∏—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
amixer sget Capture
```

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º—ã —Å –º–∏–∫—Ä–æ—Ñ–æ–Ω–æ–º

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤
./test_devices.sh

# –ê–Ω–∞–ª–∏–∑ –∑–∞–ø–∏—Å–∏
./analyze_recordings.sh

# –¢–µ—Å—Ç —Å —Ä–∞–∑–Ω—ã–º–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏
arecord -D hw:0,0 -d 3 test1.wav
arecord -D hw:1,0 -d 3 test2.wav
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å Whisper

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–æ–¥–µ–ª–∏
ls -la whisper.cpp/models/

# –¢–µ—Å—Ç Whisper –Ω–∞–ø—Ä—è–º—É—é
echo "test" > test.txt
./whisper.cpp/main -m whisper.cpp/models/ggml-base.bin -f test.txt
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å Piper

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–æ–¥–µ–ª–∏
ls -la piper/

# –¢–µ—Å—Ç Piper
echo "–ü—Ä–∏–≤–µ—Ç" | ./piper/piper --model piper/ru_RU-irina-medium.onnx --output_file test.wav
```

## –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –î–ª—è —Å–ª–∞–±—ã—Ö —Å–∏—Å—Ç–µ–º

```bash
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±–æ–ª–µ–µ –ª–µ–≥–∫–æ–π –º–æ–¥–µ–ª–∏ Whisper
# ggml-tiny.bin –≤–º–µ—Å—Ç–æ ggml-base.bin

# –£–º–µ–Ω—å—à–µ–Ω–∏–µ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∑–∞–ø–∏—Å–∏
# –ò–∑–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä trim –≤ —Å–∫—Ä–∏–ø—Ç–∞—Ö
```

### –î–ª—è –º–æ—â–Ω—ã—Ö —Å–∏—Å—Ç–µ–º

```bash
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±–æ–ª–µ–µ —Ç–æ—á–Ω–æ–π –º–æ–¥–µ–ª–∏
# ggml-medium.bin –∏–ª–∏ ggml-large.bin

# –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –±—É—Ñ–µ—Ä–æ–≤
# –ò–∑–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ —Å–∫—Ä–∏–ø—Ç–∞—Ö –∑–∞–ø–∏—Å–∏
``` 